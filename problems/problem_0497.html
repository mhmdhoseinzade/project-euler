<!DOCTYPE html><html lang=en> <head><meta charset=utf-8><meta name=author content="Colin Hughes"><meta name=description content="A website dedicated to the fascinating world of mathematics and programming"><meta name=keywords content=programming,mathematics,problems,puzzles><meta name=viewport content="width=device-width, initial-scale=1"><title>#497 Drunken Tower of Hanoi - Project Euler</title><link rel=apple-touch-icon sizes=180x180 href=favicons/apple-touch-icon.png><link rel=icon type=image/png sizes=32x32 href=favicons/favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=favicons/favicon-16x16.png><link rel=manifest href=favicons/site.webmanifest><link rel=mask-icon href=favicons/safari-pinned-tab.svg color=#5bbad5><link rel="shortcut icon" href=favicons/favicon.ico><meta name=msapplication-TileColor content=#da532c><meta name=msapplication-config content=favicons/browserconfig.xml><meta name=theme-color content=#ffffff><link rel=stylesheet type=text/css href=themes/style_main.1655628576.css><link rel=stylesheet type=text/css href=themes/style_default.1627113674.css><script src=js/mathjax_config.js></script><script src=js/polyfill.min.js></script><script id=MathJax-script async src=js/tex-mml-chtml.js>
</script></head> <body> <div id=container> <div id=header class=noprint> <img src=themes/logo_default.png> <div id=info_panel> &nbsp;&nbsp;&nbsp;<a href=search><img src=images/icons/search_engine.png alt="Search Problems" title="Search Problems" class=icon></a>&nbsp;&nbsp;&nbsp;<a href=rss2_euler.xml><img src=images/icons/news_feed.png alt="RSS Feed" title="RSS Feed" class=icon></a> </div><!--end_info_panel--> </div> <!--end_header--> <div id=navigation class="nav noprint"> <a href=about title=About accesskey=h>About</a> <a href=archives title=Archives id=current accesskey=1>Archives</a> <a href=recent title=Recent accesskey=2>Recent</a> <a href=news title=News accesskey=3>News</a> <a href=register title=Register accesskey=4>Register</a> <a href=sign_in title="Sign In" accesskey=5>Sign In</a> <a class=hamburger id=hamburger> <div class=bar></div> <div class=bar></div> <div class=bar></div> </a> </div> <!--end_nav--> <div id=content> <div class="center print"><img src=images/clipart/print_page_logo.png alt=projecteuler.net></div> <h2>Drunken Tower of Hanoi</h2><div id=problem_icons class=noprint><a href="minimal=497"><img src=images/icons/file_html.png title="Show HTML problem content" class=icon></a>&nbsp;<span class=tooltip><img src=images/icons/info.png class=icon><span class=tooltiptext_right>Published on Sunday, 11th January 2015, 04:00 am; Solved by 498;<br>Difficulty rating: 40%</span></div><div id=problem_info><h3>Problem 497</h3></div> <div class=problem_content role=problem> <p>Bob is very familiar with the famous mathematical puzzle/game, "Tower of Hanoi," which consists of three upright rods and disks of different sizes that can slide onto any of the rods. The game begins with a stack of <var>n</var> disks placed on the leftmost rod in descending order by size. The objective of the game is to move all of the disks from the leftmost rod to the rightmost rod, given the following restrictions:</p> <ol><li>Only one disk can be moved at a time.</li> <li>A valid move consists of taking the top disk from one stack and placing it onto another stack (or an empty rod).</li> <li>No disk can be placed on top of a smaller disk.</li> </ol><p>Moving on to a variant of this game, consider a long room <var>k</var> units (square tiles) wide, labeled from 1 to <var>k</var> in ascending order. Three rods are placed at squares <var>a</var>, <var>b</var>, and <var>c</var>, and a stack of <var>n</var> disks is placed on the rod at square <var>a</var>.</p> <p>Bob begins the game standing at square <var>b</var>. His objective is to play the Tower of Hanoi game by moving all of the disks to the rod at square <var>c</var>. However, Bob can only pick up or set down a disk if he is on the same square as the rod / stack in question.</p> <p>Unfortunately, Bob is also drunk. On a given move, Bob will either stumble one square to the left or one square to the right with equal probability, unless Bob is at either end of the room, in which case he can only move in one direction. Despite Bob's inebriated state, he is still capable of following the rules of the game itself, as well as choosing when to pick up or put down a disk.</p> <p>The following animation depicts a side-view of a sample game for <var>n</var> = 3, <var>k</var> = 7, <var>a</var> = 2, <var>b</var> = 4, and <var>c</var> = 6:</p> <p align=center><img src=project/images/p497_hanoi.gif alt=p497_hanoi.gif></p> <p>Let E(<var>n</var>,<var>k</var>,<var>a</var>,<var>b</var>,<var>c</var>) be the expected number of squares that Bob travels during a single optimally-played game. A game is played optimally if the number of disk-pickups is minimized.</p> <p>Interestingly enough, the result is always an integer. For example, E(2,5,1,3,5) = 60 and E(3,20,4,9,17) = 2358.</p> <p>Find the last nine digits of ∑<sub>1≤<var>n</var>≤10000</sub> E(<var>n</var>,10<sup><var>n</var></sup>,3<sup><var>n</var></sup>,6<sup><var>n</var></sup>,9<sup><var>n</var></sup>).</p> </div><br> <br></div> <!--end_content--> </div> <!--end_container--> <div id=footer class=noprint> Project Euler: <a href=copyright>Copyright Information</a> | <a href=privacy>Privacy Policy</a> </div> <!--end_footer--> <div id=modal_window> <div id=modal_content class=message_body> <p>The page has been left unattended for too long and that link/button is no longer active. Please refresh the page.</p> </div> </div> <!--end_modal_window--> <script src=js/general.1618854480.js></script> </body> </html> 